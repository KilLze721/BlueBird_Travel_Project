# 青鸟旅行网站 · 后端接口文档

 可访问swagger文档：http://localhost:8080/swagger-ui/index.html

## 接口规范

- **协议**：HTTP/HTTPS
- **数据格式**：JSON
- **鉴权方式**：登录成功后返回 Token，前端在后续请求中通过 ` token` 传递
- **统一响应结构：**

```json
{
  "code": 0,
  "msg": "success",
  "data": {}
}
```

------

# 1. 用户认证与权限系统

## 1.1 用户登录接口

**POST** `/user/login`

### 请求参数

```json
{
  "username": "admin",
  "password": "123456"
}
```

### 响应示例

```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "id": 1,
    "name": "张三",
    "token": ""
  }
}
```

------

# 2. 旅游线路浏览与筛选

## 2.1 获取线路列表（含筛选）

**GET** `/route/lines`

### 请求参数（Query）

| 参数名   | 类型   | 必填 | 说明                  |
| -------- | ------ | ---- | --------------------- |
| `name`   | string | 否   | 线路名称（模糊查询）  |
| `typeId` | int    | 否   | 线路类型 ID（下拉框） |
| `page`   | int    | 否   | 页码（默认 1）        |
| `size`   | int    | 否   | 每页数量（默认 20）   |

### 响应示例

```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "total": 100,
    "list": [
      {
        "id": 101,
        "name": "北京一日游",
        "price": 788,
        "level": "★★★★",
        "image": "",
        "typeName": "城市旅游"
      }
    ]
  }
}
```

------

## 2.2 获取线路详情

**GET** `/route/lines/{id}`

### 响应示例

```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "id": 101,
    "name": "北京一日游",
    "price": 788,
    "descText": "详细行程介绍……",
    "image": "",
    "typeId": 1,
    "level": "★★★★"
  }
}
```

------

# 3. 线路预订与订单创建

## 3.1 创建订单

**POST** `/order/create`

### 请求参数

```json
{
  "lineId": 101,
  "playDate": "2025-12-06",
  "quantity": 2
}
```

> **用户ID 不需要前端传递，由后端从 Token 中解析。**

### 响应示例

```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "orderId": 10001
  }
}
```

------

# 4. 我的订单中心

## 4.1 获取我的订单

**GET** `order/mycreate`

### 请求参数（Query）

| 参数名 | 类型 | 必填 | 说明                   |
| ------ | ---- | ---- | ---------------------- |
| `page` | int  | 否   | 默认 1                 |
| `size` | int  | 否   | 默认 10（1页10条数据） |

### 响应示例

```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "total": 3,
    "list": [
      {
        "orderId": 10001,
        "lineName": "北京一日游",
        "image": "",
        "playDate": "2025-12-06",
        "quantity": 2,
        "price": 788,
        "status": "已预订"
      }
    ]
  }
}
```

------

## 4.2 取消订单

**PUT** `/order/{id}/cancel`

### 响应示例

```json
{
  "code": 200,
  "msg": "订单已取消",
  "data": null
}
```

------

# 5. 错误码规范

| code | 含义                |
| ---- | ------------------- |
| 200  | 成功                |
| 400  | 参数错误            |
| 401  | 未登录或 Token 失效 |
| 403  | 无权限              |
| 404  | 数据不存在          |
| 500  | 服务器异常          |

